# ============================================================================
# Helm Chart Metadata
# ============================================================================
nameOverride: ""
fullnameOverride: ""

# ============================================================================
# Workload (Deployment) Configuration
# ============================================================================
deployment:
  replicaCount: 2

  image:
    repository: cargohold
    pullPolicy: IfNotPresent
    tag: ""

  imagePullSecrets: []

  pod:
    annotations: {}
    labels: {}
    nodeSelector: {}
    tolerations: []
    affinity: {}

  container:
    resources: {}
    livenessProbe:
      httpGet:
        path: /healthz
        port: http
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /readyz
        port: http
      initialDelaySeconds: 5
      periodSeconds: 10

# ============================================================================
# Server Configuration
# ============================================================================
server:
  trustProxy: false
  trustedProxyCIDRs: []
  proxyTimeout: "10m"

# ============================================================================
# Networking Configuration
# ============================================================================
service:
  type: ClusterIP
  port: 80
  targetPort: 8080
  annotations: {}

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

# ============================================================================
# Identity & Access Configuration
# ============================================================================
serviceAccount:
  create: true
  annotations: {}
  name: ""

# ============================================================================
# Scaling & Availability Configuration
# ============================================================================
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment

podDisruptionBudget:
  enabled: true
  minAvailable: 1

# ============================================================================
# OIDC Configuration
# ============================================================================
oidc:
  github:
    enabled: true
    audience: "cargohold"
    jwksUrl: "https://token.actions.githubusercontent.com/.well-known/jwks"

# ============================================================================
# OAuth Configuration
# ============================================================================
oauth:
  github:
    enabled: false
    clientId: ""
    clientSecret: ""
    allowedHosts: []
    allowedRedirectUris: []
    existingSecret: ""
    existingSecretKeys:
      clientId: "github-oauth-client-id"
      clientSecret: "github-oauth-client-secret"

# ============================================================================
# Database Migration Configuration
# ============================================================================
migration:
  enabled: true
  image:
    repository: cargohold-migration
    pullPolicy: IfNotPresent
    tag: ""
  args: ["up"]
  backoffLimit: 3
  podAnnotations: {}
  extraEnv: []
  resources:
    limits:
      cpu: 500m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  initContainers: []
  extraVolumes: []
  extraVolumeMounts: []

# ============================================================================
# External Dependencies Configuration
# ============================================================================

# PostgreSQL
postgres:
  host: "postgres"
  port: 5432
  user: "cargohold"
  database: "cargohold"
  sslMode: "require"
  password: ""
  existingSecret: ""
  existingSecretKey: "password"

# Redis
redis:
  host: "redis"
  port: 6379
  db: 0
  auth:
    enabled: false
  password: ""
  existingSecret: ""
  existingSecretKey: "password"

# S3
s3:
  endpoint: ""
  bucketName: "lfs-objects"
  region: "us-east-1"
  credentials:
    accessKeyId: ""
    secretAccessKey: ""
  existingSecret: ""
  existingSecretKeys:
    accessKeyId: "access-key-id"
    secretAccessKey: "secret-access-key"

# ============================================================================
# Advanced Customization
# ============================================================================
extraEnv: []
extraVolumes: []
extraVolumeMounts: []
extraContainers: []
initContainers: []
extraObjects: []
